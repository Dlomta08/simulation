<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Problemset</title>
  <link rel="stylesheet" href="problemset.css">
  <script>
  window.MathJax = {
    tex: { inlineMath: [['\\(', '\\)'], ['$', '$']] },
    svg: { fontCache: 'global' }
  };
  </script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
  <script>
    if (localStorage.getItem('theme') === 'dark') {
      document.documentElement.classList.add('dark-mode');
    }
  </script>
</head>
<body>
  <div class="symbol-background"></div>
  <button id="toggle-dark">­ЪїЎ</button>
  <div id="account-info"></div>

  <h2>рЃбрЃћрЃАрЃбрЃўрЃА рЃњрЃљрЃЊрЃљрЃ«рЃћрЃЊрЃЋрЃљ</h2>
  <div id="quizPreview" style="min-height:100px; border:1px solid #ccc; padding:10px;"></div>
  <button onclick="generateQuizPDF()">рЃбрЃћрЃАрЃбрЃўрЃА рЃерЃћрЃЦрЃЏрЃюрЃљ</button>
  <button onclick="shuffleQuiz()">рЃЌрЃљрЃюрЃЏрЃўрЃЏрЃЊрЃћрЃЋрЃарЃЮрЃЉрЃўрЃА рЃљрЃарЃћрЃЋрЃљ</button>

  <h1>рЃљрЃЏрЃЮрЃфрЃљрЃюрЃћрЃЉрЃў</h1>
  <button onclick="toggleTypeButtons()">рЃљрЃЏрЃЮрЃфрЃљрЃюрЃўрЃА рЃЊрЃљрЃЏрЃљрЃбрЃћрЃЉрЃљ</button>

  <div id="typeButtons" style="display:none; margin: 10px 0;">
    <button onclick="showForm('image')" value="image">­ЪЊи рЃцрЃЮрЃбрЃЮрЃА рЃљрЃбрЃЋрЃўрЃарЃЌрЃЋрЃўрЃЌ</button>
    <button onclick="showForm('word')" value="word">­ЪЊЮ Word-рЃАрЃбрЃўрЃџрЃўрЃА</button>
    <button onclick="showForm('latex')" value="latex">­ЪЊљ LaTeX</button>
  </div>

  <!-- рЃАрЃљрЃћрЃарЃЌрЃЮ рЃўрЃюрЃцрЃЮ -->
  <div id="commonFields" style="display:none; margin-top: 10px;">
    <label for="tags"><strong>рЃЌрЃћрЃЏрЃћрЃЉрЃў (рЃњрЃљрЃЏрЃЮрЃДрЃЮрЃцрЃўрЃџрЃў рЃЏрЃФрЃўрЃЏрЃўрЃЌ):</strong></label>
    <input type="text" id="tags" placeholder="рЃЏрЃљрЃњ. рЃњрЃћрЃЮрЃЏрЃћрЃбрЃарЃўрЃљ, рЃљрЃџрЃњрЃћрЃЉрЃарЃљ"><br><br>

    <label for="difficulty"><strong>рЃАрЃўрЃарЃЌрЃБрЃџрЃћ (5 рЃЉрЃљрЃџрЃўрЃљрЃюрЃў рЃАрЃўрЃАрЃбрЃћрЃЏрЃљ):</strong></label>
    <select id="difficulty">
      <option value=1>1</option>
      <option value=2>2</option>
      <option value=3 selected>3</option>
      <option value=4>4</option>
      <option value=5>5</option>
    </select><br><br>

    <label><strong>рЃљрЃЏрЃЮрЃфрЃљрЃюрЃўрЃА рЃгрЃДрЃљрЃарЃЮ:</strong></label>
    <select id="problemTarget">
      <option value="public">рЃАрЃљрЃ»рЃљрЃарЃЮ</option>
      <option value="personal">рЃърЃўрЃарЃљрЃЊрЃў</option>
    </select><br><br>
  </div>

  <!-- рЃцрЃЮрЃарЃЏрЃљ рЃцрЃЮрЃбрЃЮрЃАрЃЌрЃЋрЃўрЃА -->
  <div id="formImage" style="display:none;">
    <label for="problemImage"><strong>рЃљрЃбрЃЋрЃўрЃарЃЌрЃћрЃЌ рЃљрЃЏрЃЮрЃфрЃљрЃюрЃљ (рЃцрЃЮрЃбрЃЮ):</strong></label>
    <input type="file" id="problemImage" accept="image/*"><br><br>
    <button onclick="addProblemImage()">рЃЊрЃљрЃЏрЃљрЃбрЃћрЃЉрЃљ</button>
  </div>

  <!-- рЃцрЃЮрЃарЃЏрЃљ Word-рЃАрЃбрЃўрЃџрЃўрЃА -->
  <div id="formWord" style="display:none;">
    <label for="problemText" ><strong>рЃерЃћрЃўрЃДрЃЋрЃљрЃюрЃћрЃЌ рЃљрЃЏрЃЮрЃфрЃљрЃюрЃљ:</strong></label><br>
    <textarea id="problemText" name="word_content"></textarea><br><br>
    <button onclick="addProblemWord()">рЃЊрЃљрЃЏрЃљрЃбрЃћрЃЉрЃљ</button>
  </div>

  <!-- TinyMCE init -->
  <script>
    tinymce.init({
      selector: '#problemText',
      height: 300,
      menubar: false,
      plugins: 'charmap lists link image table',
      toolbar: 'undo redo | bold italic underline | alignleft aligncenter alignright | bullist numlist | charmap',
      charmap_append: [
        ['Рѕџ', 'Square Root'],
        ['Рѕъ', 'Infinity'],
        ['РЅц', 'Less-than or equal'],
        ['РЅЦ', 'Greater-than or equal'],
        ['РЅа', 'Not equal'],
        ['РЅѕ', 'Approximately equal'],
        ['¤ђ', 'Pi'],
        ['РѕЉ', 'Summation'],
        ['Рѕє', 'Delta'],
        ['РѕФ', 'Integral']
      ],
      content_style: "body { font-size:16px }"
    });
  </script>

  <!-- рЃцрЃЮрЃарЃЏрЃљ LaTeX -->
  <div id="formLatex" style="display:none;">
    <label for="latexInput"><strong>LaTeX рЃљрЃЏрЃЮрЃфрЃљрЃюрЃљ:</strong></label><br>
      <div id="latexShortcuts" style="margin-bottom:8px;">
        <!-- рЃцрЃБрЃюрЃЦрЃфрЃўрЃћрЃЉрЃў -->
        <button type="button" onclick="insertLatexSnippet('latexInput', '\\text{}')">рЃбрЃћрЃЦрЃАрЃбрЃў</button>
        <button type="button" onclick="insertLatexSnippet('latexInput', '\\frac{}{}')">рЃгрЃўрЃџрЃљрЃЊрЃў</button>
        <button type="button" onclick="insertLatexSnippet('latexInput', '\\sqrt{}')">рЃЎрЃЋрЃљрЃЊрЃарЃљрЃбрЃБрЃџрЃў рЃцрЃћрЃАрЃЋрЃў</button>
        <button type="button" onclick="insertLatexSnippet('latexInput', '\\int_{}^{} {} \\,dx')">рЃўрЃюрЃбрЃћрЃњрЃарЃљрЃџрЃў</button>
        <button type="button" onclick="insertLatexSnippet('latexInput', '\\sum_{}^{} {}')">рЃ»рЃљрЃЏрЃў</button>
        <button type="button" onclick="insertLatexSnippet('latexInput', '\\prod_{}^{} {}')">рЃюрЃљрЃЏрЃарЃљрЃЋрЃџрЃў</button>
        <button type="button" onclick="insertLatexSnippet('latexInput', '\\lim_{x \\to {}} {}')">рЃџрЃўрЃЏрЃўрЃбрЃў</button>
        <button type="button" onclick="insertLatexSnippet('latexInput', '\\log_{}{}')">рЃџрЃЮрЃњрЃљрЃарЃўрЃЌрЃЏрЃў</button>
        <button type="button" onclick="insertLatexSnippet('latexInput', '\\sin{}')">рЃАрЃўрЃюрЃБрЃАрЃў</button>
        <button type="button" onclick="insertLatexSnippet('latexInput', '\\cos{}')">рЃЎрЃЮрЃАрЃўрЃюрЃБрЃАрЃў</button>
        <button type="button" onclick="insertLatexSnippet('latexInput', '\\tan{}')">рЃбрЃљрЃюрЃњрЃћрЃюрЃАрЃў</button>
        <button type="button" onclick="insertLatexSnippet('latexInput', '\\vec{}')">рЃЋрЃћрЃЦрЃбрЃЮрЃарЃў</button>
        <button type="button" onclick="insertLatexSnippet('latexInput', '\\leq')">&leq;</button>
        <button type="button" onclick="insertLatexSnippet('latexInput', '\\geq')">&geq;</button>
        <button type="button" onclick="insertLatexSnippet('latexInput', '\\neq')">&ne;</button>
        <button type="button" onclick="insertLatexSnippet('latexInput', '\\approx')">&asymp;</button>
        <button type="button" onclick="insertLatexSnippet('latexInput', '\\infty')">&infin;</button>
      </div>
    <textarea id="latexInput" name="latex_content" rows="6" cols="60" placeholder="рЃЏрЃљрЃњ. $$a^2 + b^2 = c^2$$"></textarea><br><br>

    <!-- Live Preview -->
    <div id="latexPreview"></div>
    
    <br>
    <button type="button" onclick="addProblemLatex()">рЃЊрЃљрЃЏрЃљрЃбрЃћрЃЉрЃљ</button>
  </div>

  <hr>
  <button onclick="toggleFilter()">рЃљрЃЏрЃЮрЃфрЃљрЃюрЃћрЃЉрЃўрЃА рЃцрЃўрЃџрЃбрЃарЃў</button>
  <div id="filterSection" style="display:none; margin-top: 15px;">
    <strong>рЃАрЃўрЃарЃЌрЃБрЃџрЃўрЃА рЃЊрЃўрЃљрЃърЃљрЃќрЃЮрЃюрЃў:</strong>
    <select id="filterMinDifficulty"><option value="1" selected>1</option><option value="2">2</option><option value="3">3</option><option value="4">4</option><option value="5">5</option></select>
    -
    <select id="filterMaxDifficulty"><option value="1">1</option><option value="2">2</option><option value="3">3</option><option value="4">4</option><option value="5" selected>5</option></select><br><br>

    <label for="filterTags"><strong>рЃњрЃљрЃцрЃўрЃџрЃбрЃарЃћрЃЌ рЃЌрЃћрЃЏрЃћрЃЉрЃў (рЃњрЃљрЃЏрЃЮрЃДрЃЮрЃцрЃўрЃџрЃў рЃЏрЃФрЃўрЃЏрЃўрЃЌ):</strong></label>
    <input type="text" id="filterTags" placeholder="рЃЏрЃљрЃњ. рЃњрЃћрЃЮрЃЏрЃћрЃбрЃарЃўрЃљ, рЃљрЃџрЃњрЃћрЃЉрЃарЃљ"><br><br>

    <label for="filterSource"><strong>рЃљрЃЏрЃЮрЃфрЃљрЃюрЃўрЃА рЃгрЃДрЃљрЃарЃЮ:</strong></label>
    <select id="filterSource">
      <option value="both" selected>рЃДрЃЋрЃћрЃџрЃљ</option>
      <option value="personal">рЃърЃўрЃарЃљрЃЊрЃў</option>
      <option value="public">рЃАрЃљрЃ»рЃљрЃарЃЮ</option>
    </select><br><br>

    <button onclick="applyFilters()">рЃњрЃљрЃцрЃўрЃџрЃбрЃЋрЃарЃљ</button>
  </div>

  <div id="problemList"></div>

  <script src="problemset.js"></script>
  <script src="darkmode.js"></script>
  <script src="account.js"></script>
</body>
</html>
