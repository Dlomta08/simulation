<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Problemset</title>
  <link rel="stylesheet" href="problemset.css">
  <script>
  window.MathJax = {
    tex: { inlineMath: [['\\(', '\\)'], ['$', '$']] },
    svg: { fontCache: 'global' }
  };
  </script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
  <script>
    if (localStorage.getItem('theme') === 'dark') {
      document.documentElement.classList.add('dark-mode');
    }
  </script>
</head>
<body>
  <div class="symbol-background"></div>
  <button id="toggle-dark">ğŸŒ™</button>
  <div id="account-info"></div>

  <h2>áƒ¢áƒ”áƒ¡áƒ¢áƒ˜áƒ¡ áƒ’áƒáƒ“áƒáƒ®áƒ”áƒ“áƒ•áƒ</h2>
  <div id="quizPreview" style="min-height:100px; border:1px solid #ccc; padding:10px;"></div>
  <button onclick="generateQuizPDF()">áƒ¢áƒ”áƒ¡áƒ¢áƒ˜áƒ¡ áƒ¨áƒ”áƒ¥áƒ›áƒœáƒ</button>
  <button onclick="shuffleQuiz()">áƒ—áƒáƒœáƒ›áƒ˜áƒ›áƒ“áƒ”áƒ•áƒ áƒáƒ‘áƒ˜áƒ¡ áƒáƒ áƒ”áƒ•áƒ</button>

  <h1>áƒáƒ›áƒáƒªáƒáƒœáƒ”áƒ‘áƒ˜</h1>
  <button onclick="toggleTypeButtons()">áƒáƒ›áƒáƒªáƒáƒœáƒ˜áƒ¡ áƒ“áƒáƒ›áƒáƒ¢áƒ”áƒ‘áƒ</button>

  <div id="typeButtons" style="display:none; margin: 10px 0;">
    <button onclick="showForm('image')" value="image">ğŸ“· áƒ¤áƒáƒ¢áƒáƒ¡ áƒáƒ¢áƒ•áƒ˜áƒ áƒ—áƒ•áƒ˜áƒ—</button>
    <button onclick="showForm('word')" value="word">ğŸ“ Word-áƒ¡áƒ¢áƒ˜áƒšáƒ˜áƒ¡</button>
    <button onclick="showForm('latex')" value="latex">ğŸ“ LaTeX</button>
  </div>

  <!-- áƒ¡áƒáƒ”áƒ áƒ—áƒ áƒ˜áƒœáƒ¤áƒ -->
  <div id="commonFields" style="display:none; margin-top: 10px;">
    <label for="tags"><strong>áƒ—áƒ”áƒ›áƒ”áƒ‘áƒ˜ (áƒ’áƒáƒ›áƒáƒ§áƒáƒ¤áƒ˜áƒšáƒ˜ áƒ›áƒ«áƒ˜áƒ›áƒ˜áƒ—):</strong></label>
    <input type="text" id="tags" placeholder="áƒ›áƒáƒ’. áƒ’áƒ”áƒáƒ›áƒ”áƒ¢áƒ áƒ˜áƒ, áƒáƒšáƒ’áƒ”áƒ‘áƒ áƒ"><br><br>

    <label for="difficulty"><strong>áƒ¡áƒ˜áƒ áƒ—áƒ£áƒšáƒ” (5 áƒ‘áƒáƒšáƒ˜áƒáƒœáƒ˜ áƒ¡áƒ˜áƒ¡áƒ¢áƒ”áƒ›áƒ):</strong></label>
    <select id="difficulty">
      <option value=1>1</option>
      <option value=2>2</option>
      <option value=3 selected>3</option>
      <option value=4>4</option>
      <option value=5>5</option>
    </select><br><br>

    <label><strong>áƒáƒ›áƒáƒªáƒáƒœáƒ˜áƒ¡ áƒ¬áƒ§áƒáƒ áƒ:</strong></label>
    <select id="problemTarget">
      <option value="public">áƒ¡áƒáƒ¯áƒáƒ áƒ</option>
      <option value="personal">áƒáƒ˜áƒ áƒáƒ“áƒ˜</option>
    </select><br><br>
  </div>

  <!-- áƒ¤áƒáƒ áƒ›áƒ áƒ¤áƒáƒ¢áƒáƒ¡áƒ—áƒ•áƒ˜áƒ¡ -->
  <div id="formImage" style="display:none;">
    <label for="problemImage"><strong>áƒáƒ¢áƒ•áƒ˜áƒ áƒ—áƒ”áƒ— áƒáƒ›áƒáƒªáƒáƒœáƒ (áƒ¤áƒáƒ¢áƒ):</strong></label>
    <input type="file" id="problemImage" accept="image/*"><br><br>
    <button onclick="addProblemImage()">áƒ“áƒáƒ›áƒáƒ¢áƒ”áƒ‘áƒ</button>
  </div>

  <!-- áƒ¤áƒáƒ áƒ›áƒ Word-áƒ¡áƒ¢áƒ˜áƒšáƒ˜áƒ¡ -->
  <div id="formWord" style="display:none;">
    <label for="problemText" ><strong>áƒ¨áƒ”áƒ˜áƒ§áƒ•áƒáƒœáƒ”áƒ— áƒáƒ›áƒáƒªáƒáƒœáƒ:</strong></label><br>
    <textarea id="problemText" name="word_content"></textarea><br><br>
    <button onclick="addProblemWord()">áƒ“áƒáƒ›áƒáƒ¢áƒ”áƒ‘áƒ</button>
  </div>

  <!-- TinyMCE init -->
  <script>
    tinymce.init({
      selector: '#problemText',
      height: 300,
      menubar: false,
      plugins: 'charmap lists link image table',
      toolbar: 'undo redo | bold italic underline | alignleft aligncenter alignright | bullist numlist | charmap',
      charmap_append: [
        ['âˆš', 'Square Root'],
        ['âˆ', 'Infinity'],
        ['â‰¤', 'Less-than or equal'],
        ['â‰¥', 'Greater-than or equal'],
        ['â‰ ', 'Not equal'],
        ['â‰ˆ', 'Approximately equal'],
        ['Ï€', 'Pi'],
        ['âˆ‘', 'Summation'],
        ['âˆ†', 'Delta'],
        ['âˆ«', 'Integral']
      ],
      content_style: "body { font-size:16px }"
    });
  </script>

  <!-- áƒ¤áƒáƒ áƒ›áƒ LaTeX -->
  <div id="formLatex" style="display:none;">
    <label for="latexInput"><strong>LaTeX áƒáƒ›áƒáƒªáƒáƒœáƒ:</strong></label><br>
      <div id="latexShortcuts" style="margin-bottom:8px;">
        <div class="latex-shortcut-table">
          <button type="button" onclick="insertLatexSnippet('latexInput', '^{}')">$x^n$</button>
          <button type="button" onclick="insertLatexSnippet('latexInput', '_{}')">$x_n$</button>
          <button type="button" onclick="insertLatexSnippet('latexInput', '\\sqrt{}')">$\sqrt{x}$</button>
          <button type="button" onclick="insertLatexSnippet('latexInput', '\\frac{}{}')">$\frac{a}{b}$</button>
          <button type="button" onclick="insertLatexSnippet('latexInput', '\\sum_{}^{}')">$\sum_{}^{}$</button>
          <button type="button" onclick="insertLatexSnippet('latexInput', '\\prod_{}^{}')">$\prod_{}^{}$</button>
          <button type="button" onclick="insertLatexSnippet('latexInput', '\\int_{}^{}')">$\int_{}^{}$</button>

          <button type="button" onclick="insertLatexSnippet('latexInput', '\\sqrt[]{}')">$\sqrt[n]{x}$</button>
          <button type="button" onclick="insertLatexSnippet('latexInput', '\\oint_{}^{}')">$\oint_{}^{}$</button>
          <button type="button" onclick="insertLatexSnippet('latexInput', '\\frac{d}{dx}')">$\frac{d}{dx}$</button>
          <button type="button" onclick="insertLatexSnippet('latexInput', '\\frac{\partial }{\partial x}')">$\frac{\partial }{\partial x}$</button>
          <button type="button" onclick="insertLatexSnippet('latexInput', '\\implies')">$\implies$</button>
          <button type="button" onclick="insertLatexSnippet('latexInput', '\\iff')">$\iff$</button>
          <button type="button" onclick="insertLatexSnippet('latexInput', '\\times')">$\times$</button>
          
          <button type="button" onclick="insertLatexSnippet('latexInput', '\\#')">$\#$</button>
          <button type="button" onclick="insertLatexSnippet('latexInput', '\\wedge')">$\wedge$</button>
          <button type="button" onclick="insertLatexSnippet('latexInput', '\\vee')">$\vee$</button>
          <button type="button" onclick="insertLatexSnippet('latexInput', '\\in')">$\in$</button>
          <button type="button" onclick="insertLatexSnippet('latexInput', '\\notin')">$\notin$</button>
          <button type="button" onclick="insertLatexSnippet('latexInput', '\\smallsetminus')">$\smallsetminus$</button>
          <button type="button" onclick="insertLatexSnippet('latexInput', '\\lim_{x \\to 0} ')">$\lim_{x\to 0}$</button>
          
          <button type="button" onclick="insertLatexSnippet('latexInput', '\\infty')">$\infty$</button>
          <button type="button" onclick="insertLatexSnippet('latexInput', '\\pm')">$\pm$</button>
          <button type="button" onclick="insertLatexSnippet('latexInput', '\\mp')">$\mp$</button>
          <button type="button" onclick="insertLatexSnippet('latexInput', '\\varnothing')">$\varnothing$</button>
          <button type="button" onclick="insertLatexSnippet('latexInput', '\\forall')">$\forall$</button>
          <button type="button" onclick="insertLatexSnippet('latexInput', '\\exists')">$\exists$</button>
          <button type="button" onclick="insertLatexSnippet('latexInput', '\\neq')">$\neq$</button>
          
          <button type="button" onclick="insertLatexSnippet('latexInput', '\\Delta')">$\Delta$</button>
          <button type="button" onclick="insertLatexSnippet('latexInput', '\\to')">$\to$</button>
          <button type="button" onclick="insertLatexSnippet('latexInput', '|')">$|$</button>
          <button type="button" onclick="insertLatexSnippet('latexInput', '\\nmid')">$\nmid$</button>
          <button type="button" onclick="insertLatexSnippet('latexInput', '\\lbrace')">$\lbrace\rbrace$</button>
          <button type="button" onclick="insertLatexSnippet('latexInput', '\\neg')">$\neg$</button>
          <button type="button" onclick="insertLatexSnippet('latexInput', '\\approx')">$\approx$</button>
        </div>
        </div>
      </div>
    <textarea id="latexInput" name="latex_content" rows="6" cols="60" placeholder="áƒ›áƒáƒ’. $$a^2 + b^2 = c^2$$"></textarea><br><br>

    <!-- Live Preview -->
    <div id="latexPreview" style="min-height:50px; padding:8px; border:1px solid #ccc; background:#fafafa;"></div>
    
    <br>
    <button type="button" onclick="addProblemLatex()">áƒ“áƒáƒ›áƒáƒ¢áƒ”áƒ‘áƒ</button>
  </div>

  <hr>
  <button onclick="toggleFilter()">áƒáƒ›áƒáƒªáƒáƒœáƒ”áƒ‘áƒ˜áƒ¡ áƒ¤áƒ˜áƒšáƒ¢áƒ áƒ˜</button>
  <div id="filterSection" style="display:none; margin-top: 15px;">
    <strong>áƒ¡áƒ˜áƒ áƒ—áƒ£áƒšáƒ˜áƒ¡ áƒ“áƒ˜áƒáƒáƒáƒ–áƒáƒœáƒ˜:</strong>
    <select id="filterMinDifficulty"><option value="1" selected>1</option><option value="2">2</option><option value="3">3</option><option value="4">4</option><option value="5">5</option></select>
    -
    <select id="filterMaxDifficulty"><option value="1">1</option><option value="2">2</option><option value="3">3</option><option value="4">4</option><option value="5" selected>5</option></select><br><br>

    <label for="filterTags"><strong>áƒ’áƒáƒ¤áƒ˜áƒšáƒ¢áƒ áƒ”áƒ— áƒ—áƒ”áƒ›áƒ”áƒ‘áƒ˜ (áƒ’áƒáƒ›áƒáƒ§áƒáƒ¤áƒ˜áƒšáƒ˜ áƒ›áƒ«áƒ˜áƒ›áƒ˜áƒ—):</strong></label>
    <input type="text" id="filterTags" placeholder="áƒ›áƒáƒ’. áƒ’áƒ”áƒáƒ›áƒ”áƒ¢áƒ áƒ˜áƒ, áƒáƒšáƒ’áƒ”áƒ‘áƒ áƒ"><br><br>

    <label for="filterSource"><strong>áƒáƒ›áƒáƒªáƒáƒœáƒ˜áƒ¡ áƒ¬áƒ§áƒáƒ áƒ:</strong></label>
    <select id="filterSource">
      <option value="both" selected>áƒ§áƒ•áƒ”áƒšáƒ</option>
      <option value="personal">áƒáƒ˜áƒ áƒáƒ“áƒ˜</option>
      <option value="public">áƒ¡áƒáƒ¯áƒáƒ áƒ</option>
    </select><br><br>

    <button onclick="applyFilters()">áƒ’áƒáƒ¤áƒ˜áƒšáƒ¢áƒ•áƒ áƒ</button>
  </div>

  <div id="problemList"></div>

  <script src="problemset.js"></script>
  <script src="darkmode.js"></script>
  <script src="account.js"></script>
</body>
</html>
